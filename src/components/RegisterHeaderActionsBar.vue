<script setup>
import ActionButton from '@/components/ActionButton.vue'
import ActionButton2L from '@/components/ActionButton2L.vue'

const props = defineProps({
  item: { type: Object, required: true },
  disabled: { type: Boolean, default: false },
  iconSize: { type: String, default: '2x' }
})

const emit = defineEmits([
  'validate-sw',
  'validate-fc',
  'lookup',
  'lookup-ex',
  'export-noexcise',
  'export-excise',
  'download',
  'download-invoice',
  'download-invoice-excise',
  'download-invoice-without-excise'
])

function run(evt) {
  if (props.disabled) return
  emit(evt)
}
</script>

<template>
  <div style="display:flex; align-items:center;">
    <div class="header-actions header-actions-group">
      <ActionButton
        :item="item"
        icon="fa-solid fa-spell-check"
        tooltip-text="Проверить по стоп-словам"
        :iconSize="iconSize"
        :disabled="disabled"
        @click="run('validate-sw')"
      />
      <ActionButton
        :item="item"
        icon="fa-solid fa-anchor-circle-check"
        tooltip-text="Проверить по кодам ТН ВЭД"
        :iconSize="iconSize"
        :disabled="disabled"
        @click="run('validate-fc')"
      />
      <ActionButton
        :item="item"
        icon="fa-solid fa-magnifying-glass"
        tooltip-text="Подбор кодов ТН ВЭД"
        :iconSize="iconSize"
        :disabled="disabled"
        @click="run('lookup')"
      />
      <ActionButton
        :item="item"
        icon="fa-solid fa-book-skull"
        tooltip-text="Расширенный подбор кодов ТН ВЭД"
        :iconSize="iconSize"
        :disabled="disabled"
        @click="run('lookup-ex')"
      />
    </div>
    <div class="header-actions header-actions-group">
      <ActionButton
        :item="item"
        icon="fa-solid fa-upload"
        tooltip-text="Выгрузить XML накладные для реестра (без акциза)"
        :iconSize="iconSize"
        variant="green"
        :disabled="disabled"
        @click="run('export-noexcise')"
      />
      <ActionButton
        :item="item"
        icon="fa-solid fa-upload"
        tooltip-text="Выгрузить XML накладные для реестра (акциз)"
        :iconSize="iconSize"
        variant="orange"
        :disabled="disabled"
        @click="run('export-excise')"
      />
      <ActionButton
        :item="item"
        icon="fa-solid fa-file-export"
        tooltip-text="Экспортировать реестр"
        :iconSize="iconSize"
        :disabled="disabled"
        @click="run('download')"
      />
      <!-- Invoice / manifest generation menu -->
      <ActionButton2L
        :item="item"
        icon="fa-solid fa-file-invoice"
        tooltip-text="Сформировать инвойс-манифест"
        :iconSize="iconSize"
        :disabled="disabled"
        :options="[
          { label: 'Все', action: (it) => emit('download-invoice', it) },
          { label: 'С акцизом', action: (it) => emit('download-invoice-excise', it) },
          { label: 'Без акциза', action: (it) => emit('download-invoice-without-excise', it) }
        ]"
      />
    </div>
  </div>
</template>
